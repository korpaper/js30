<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://fav.farm/ðŸ”¥" />
</head>
<body>


  <div class="keys">
    <div data-key="65" class="key">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
  </div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

<script>
  // // í‚¤ ìž…ë ¥ì„ ë°›ì•˜ì„ ëŒ€ í˜¸ì¶œí•  í•¨ìˆ˜
  // function playSound(e) {
  //   //audioì˜ data-key ì†ì„± ê°’ì„ ê°€ì ¸ì™€ audio ë³€ìˆ˜ì— í• ë‹¹(divì™€ audioì— ê°™ì€ ì†ì„±ì´ ìžˆìœ¼ë¯€ë¡œ ê°™ì´ ì—°ë™ëœë‹¤ê³  ë³´ë©´ ë¨)
  //   const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
  //   //class ê°€ key ì¸ ìš”ì†Œì˜ data-key ì†ì„± ê°’ì„ ê°€ì ¸ì™€ key ë³€ìˆ˜ì— í• ë‹¹
  //   const key = document.querySelector(`.key[data-key="${e.keyCode}"]`); //ì• ë‹ˆë©”ì´ì…˜ì„ ì£¼ê¸° ìœ„í•´ audio ê°€ ì•„ë‹Œ div ë¥¼ ì„ íƒí•¨
  //   if (!audio) return; // audioê°€ ì•„ë‹ˆë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜(í•¨ìˆ˜ê°€ ì¢…ë£Œ)
  //   audio.currentTime = 0; // ìž¬ìƒì‹œê°„ì„ 0ìœ¼ë¡œ í• ë‹¹(ìž¬ìƒì´ ëë‚˜ê¸¸ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì²˜ìŒë¶€í„° ì‹¤í–‰)
  //   // ìž…ë ¥ë°›ì€ í‚¤ì— í•´ë‹¹í•˜ëŠ” audio ì˜ src ì‹¤í–‰
  //   audio.play();
  //   //í‚¤ ëˆ„ë¥¼ ì‹œ playing class ì¶”ê°€ (íŠ¸ëžœìŠ¤í¼, ë³´ë”ì»¬ëŸ¬, ë°•ìŠ¤ì‰ë„ìš°)
  //   key.classList.add('playing');
  // }
  // // window ê°ì²´ì— event ì¶”ê°€(í‚¤ë³´ë“œ ëˆŒë €ì„ ë•Œ playSound í•¨ìˆ˜ ì‹¤í–‰)
  // window.addEventListener('keydown', playSound);

  // //=> 0.07s ë§Œì— remove
  // function removeTransition(e) {
  //   // console.log(e) ì½˜ì†”ì—ì„œ ì–´ë–¤ ê±¸ remove í•  ì§€ ì†ì„±ëª…ì„ ì°¾ìŒ.
  //   // e.propertyNameì€ transitionê³¼ ì—°ê´€ëœ ì†ì„± ì´ë¦„ì´ë‹¤.
  //   // e.propertyNameì´ 'transform'ì´ ì•„ë‹ˆë¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
  //   if(e.propertyName !== 'transform') return; // propertyName ê³¼ transform ì´ ê°™ì§€ ì•Šë‹¤ë©´ ë°˜í™˜(íž˜ìˆ˜ ì¢…ë£Œ)
  //   // => propertyName ì— transform ì´ ìžˆë‹¤ë©´ í•¨ìˆ˜ ì‹¤í–‰ => ê·¸ëŸ¬ë‹ˆê¹Œ playing class remove.
  //   this.classList.remove('playing');
  //   //console.log(e)
  // }
  // // => ì´ í•¨ìˆ˜ë“¤ì€ css ì— ì ìš©ëœ transition ì‹œê°„ ë™ì•ˆ ì¼œì¡Œë‹¤ êº¼ì¡Œë‹¤ í•œë‹¤.

  // // classê°€ keyì¸ íƒœê·¸ë“¤ì„ ëª¨ë‘ ê°€ì ¸ì™€ ë³€ìˆ˜ keysì— í• ë‹¹
  // const keys = document.querySelectorAll('.key');
  // /** 
  //  keys ë°°ì—´ì„ forEach ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë°°ì—´ ì•ˆì˜ key ìš”ì†Œë“¤ì— removeTransitioní•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” 'transitionend'ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•œë‹¤.
  //  'transitionend'ì´ë²¤íŠ¸ëŠ” ë³€í™”(css transition)ê°€ ëë‚¬ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ì´ë‹¤.
  //  */
  // keys.forEach(key => key.addEventListener('transitionend', removeTransition));

  function playSound(e){
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
    // ë„ëŒ€ì²´ ì™œ í‚¤ì½”ë“œ ì†ì„±ì„ ê°€ì ¸ì™€ì•¼ë§Œ íš¨ê³¼ê°€ ë‹¤ë“¤ì–´ê°€ëƒ???
    const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);

    if(!audio) return;

    audio.currentTime = 0;

    audio.play();
    
    key.classList.add('playing');
  }
  window.addEventListener('keydown', playSound);

  function removeTransition(e){
    console.log(e)
    if(e.propertyName !== 'transform') return;
    
    this.classList.remove('playing');
  }
  
  const keys = document.querySelectorAll('.key');
  keys.forEach(key => key.addEventListener('transitionend', removeTransition));


  
  


</script>

</body>
</html>
